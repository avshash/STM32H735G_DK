#include "common.h"
#include "ObjectAPtr.h"

#include "Object.h"

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    ObjectAPtr
// @method:   constructor
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
ObjectAPtr::ObjectAPtr (Object * object)
: m_object (object)
{
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    ObjectAPtr
// @method:   constructor
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
ObjectAPtr::ObjectAPtr (ObjectAPtr & source)
: m_object (source.m_object)
{
  source.m_object = NULL;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    ObjectAPtr
// @method:   destructor
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
ObjectAPtr::~ObjectAPtr ()
{
  if (m_object != NULL)
  {
    delete m_object;
  }
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    ObjectAPtr
// @method:   operator
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
ObjectAPtr::operator Object * ()
{
  Object * ret_val = m_object;
  m_object = NULL;

  return ret_val;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    ObjectAPtr
// @method:   operator
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Object &
ObjectAPtr::operator* ()
{
  INTERNAL_ASSERT (m_object != NULL);

  return *m_object;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    ObjectAPtr
// @method:   operator
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const Object &
ObjectAPtr::operator* () const
{
  INTERNAL_ASSERT (m_object != NULL);

  return *m_object;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    ObjectAPtr
// @method:   operator
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Object *
ObjectAPtr::operator-> ()
{
  INTERNAL_ASSERT (m_object != NULL);

  return m_object;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    ObjectAPtr
// @method:   operator
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const Object *
ObjectAPtr::operator-> () const
{
  INTERNAL_ASSERT (m_object != NULL);

  return m_object;
}


