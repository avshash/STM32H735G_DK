#include "Common.h"
#include "Timer.h"

#include "SystemTime.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    Timer
// @method:   constructor
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Timer::Timer () :
  m_lease (0)
{
}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    Timer
// @method:   leaseFromNow
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void
Timer::leaseFromNow (uint32_t milli)
{
  uint32_t ticks_count = SystemTime::getSystemMilliTime ();

  m_lease = ticks_count + milli;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    Timer
// @method:   extendLease
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void
Timer::extendLease (uint32_t milli)
{
  m_lease = m_lease + milli;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    Timer
// @method:   testExpired
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
bool
Timer::testExpired () const
{
  uint32_t ticks_count = SystemTime::getSystemMilliTime ();

  return (m_lease < ticks_count);
}

