#include "Common.h"
#include "MacronixParams.h"

#include <cstring>

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    MacronixParams
// @method:   constructor
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
MacronixParams::MacronixParams ()
{
  memset (m_macronix_params, 0, sizeof (m_macronix_params));
  memset (m_flash_params, 0, sizeof (m_flash_params));
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    MacronixParams
// @method:   setMacronixParam
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void
MacronixParams::setMacronixParam (TypeMacronixParam param, uint32_t value)
{
  ASSERT_DEV (m_macronix_params[param] == 0);

  m_macronix_params[param] = value;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    MacronixParams
// @method:   getMacronixParam
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
uint32_t
MacronixParams::getMacronixParam (TypeMacronixParam param) const
{
  return m_macronix_params[param];
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    MacronixParams
// @method:   setFlashParam
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void
MacronixParams::setFlashParam (TypeFlashParam param, uint32_t value)
{
  ASSERT_DEV (m_flash_params[param] == 0);

  m_flash_params[param] = value;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    MacronixParams
// @method:   getFlashParam
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
uint32_t
MacronixParams::getFlashParam (TypeFlashParam param) const
{
  return m_flash_params[param];
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// @class:    MacronixParams
// @method:   verifyInitiated
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
bool
MacronixParams::verifyInitiated () const
{
  for (uint32_t index = 0; index < MACRONIX_PARAM_COUNT; index++)
  {
    if (m_macronix_params[index] == 0)
    {
      ASSERT_TEST (index == 0xFFFFFFFFUL);
      return false;
    }
  }

  for (uint32_t index = 0; index < FLASH_PARAM_COUNT; index++)
  {
    if (m_flash_params[index] == 0)
    {
      ASSERT_TEST (index == 0xFFFFFFFFUL);
      return false;
    }
  }

  return true;
}

